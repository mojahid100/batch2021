<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title id="quizTitle">All previous years' questions part 2</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-093NGZNZQG"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-093NGZNZQG');
    </script>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f7f7f7;
        margin: 0;
        padding: 20px;
      }
      h1, h2 {
        text-align: center;
        color: #1e90ff;
      }
      .question-box {
        display: none;
      }
      .question-text {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 20px;
      }
      .options button {
        display: block;
        width: 100%;
        background-color: #1e90ff;
        color: white;
        border: 2px solid #1e90ff;
        padding: 12px;
        margin: 8px 0;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        text-align: left;
        box-sizing: border-box;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        pointer-events: auto;
      }
      .options button:hover {
        background-color: #104e8b;
        border-color: #104e8b;
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
      }
      .options button:active {
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .answer, .more-details-btn, .details-box {
        display: none;
        margin-top: 15px;
      }
      .answer {
        background: #d8f3dc;
        padding: 12px;
        border-radius: 6px;
        border: 1px solid #5cb85c;
      }
      .details-box {
        background: #eef7ff;
        padding: 12px;
        border-left: 5px solid #1e90ff;
      }
      .next-btn, .start-btn, .more-details-btn {
        margin-top: 20px;
        padding: 12px 24px;
        background-color: #1e90ff;
        color: white;
        border: 2px solid #1e90ff;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
      }
      .next-btn:hover, .start-btn:hover, .more-details-btn:hover {
        background-color: #104e8b;
        border-color: #104e8b;
      }
      .next-btn:active, .start-btn:active, .more-details-btn:active {
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .start-screen {
        text-align: center;
      }
      #answerBox, #detailsBox, #detailsBtn, #nextBtn {
        display: none;
      }
      .question-nav {
        margin-top: 20px;
        text-align: center;
      }
      .question-nav button {
        background-color: #1e90ff;
        color: white;
        border: 2px solid #1e90ff;
        padding: 8px 12px;
        margin: 5px;
        border-radius: 6px;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .question-nav button:hover {
        background-color: #104e8b;
        border-color: #104e8b;
      }
      .question-nav button:disabled {
        background-color: #cccccc;
        border-color: #cccccc;
        cursor: not-allowed;
        opacity: 0.6;
      }
    </style>
  </head>
  <body>
    <a href="index.html" style="
    display: inline-block;
    margin: 20px auto;
    padding: 10px 20px;
    background: linear-gradient(135deg, #1e90ff, #104e8b);
    color: white;
    text-decoration: none;
    font-weight: bold;
    border-radius: 8px;
    text-align: center;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
">
    ⬅️ الرجوع إلى الصفحة الرئيسية
</a>

    <div class="container">
      <div class="start-screen" id="startScreen">
        <h1 id="quizHeader">All previous years questions part 2</h1>
        <p id="lessonText">الأسئلة من السنين السابقة</p>
        <button class="start-btn" onclick="startQuiz()">Start Quiz</button>
      </div>

      <div class="question-box" id="questionBox">
        <div class="question-text" id="questionText"></div>
        <div class="options" id="optionsBox"></div>
        <div class="answer" id="answerBox"></div>
        <button class="more-details-btn" id="detailsBtn" onclick="showDetails()">More details</button>
        <div class="details-box" id="detailsBox"></div>
        <button class="next-btn" id="nextBtn" onclick="nextQuestion()">Next</button>
        <div class="question-nav" id="questionNav"></div>
      </div>
    </div>

    <script>
      // Configuration object for quiz content
      const quizConfig = {
        title: "All previous years questions part 2",
        lesson: "الأسئلة السنين السابقة",
        questions: [
          {
            text: "Which of the following conditions is precancerous in cancer esophagus?",
            choices: [
              "A. GERD",
              "B. Achalasia",
              "C. Corrosive stricture",
              "D. All of the above"
            ],
            correct: 0,
            explanation: "Correct Answer: A. GERD is precancerous for esophageal adenocarcinoma via Barrett’s esophagus.",
            details: "A. Correct: GERD leads to Barrett’s esophagus, a precursor to adenocarcinoma.<br>B. Incorrect: Achalasia has a weak association with squamous cell carcinoma, not strongly precancerous.<br>C. Incorrect: Corrosive strictures have chronic inflammation but are less associated with cancer."
          },
          {
            text: "Which of the following statements regarding investigations in dysphagia is false?",
            choices: [
              "A. Barium swallow is the investigation of choice in GERD.",
              "B. Flexible oesophagogastroduodenoscopy (OGD) is the initial investigation of choice in suspected carcinoma.",
              "C. Oesophageal manometry should be done when motility disorder is suspected.",
              "D. 24 h pH recording is an accurate method of evaluating GERD."
            ],
            correct: 0,
            explanation: "Correct Answer: A. Barium swallow is not the investigation of choice in GERD; OGD is preferred.",
            details: "A. Correct: False; OGD assesses GERD complications.<br>B. Incorrect: OGD is standard for carcinoma.<br>C. Incorrect: Manometry diagnoses motility disorders.<br>D. Incorrect: pH recording is accurate for GERD."
          },
          {
            text: "Which of the following is true with regard to the clinical features of peptic ulcers?",
            choices: [
              "A. The pain never radiates to the back and this differentiates this from biliary colic.",
              "B. Vomiting is a notable feature.",
              "C. They may cause gastric outlet obstruction.",
              "D. Bleeding is rare."
            ],
            correct: 2,
            explanation: "Correct Answer: C. Peptic ulcers can cause gastric outlet obstruction due to scarring or edema.",
            details: "A. Incorrect: Pain can radiate to the back.<br>B. Incorrect: Vomiting is not prominent unless obstructed.<br>C. Correct: Obstruction is a known complication.<br>D. Incorrect: Bleeding is common."
          },
          {
            text: "Which of the following statements regarding treatment of peptic ulceration is true?",
            choices: [
              "A. Surgery remains the mainstay treatment.",
              "B. Eradication therapy including PPIs is given routinely to all patients with peptic ulceration.",
              "C. Late dumping syndrome occurring after gastric surgery is due to a sudden increased osmotic load in the small bowel.",
              "D. Biopsy of the ulcer margins is mandatory when dealing with a duodenal ulcer."
            ],
            correct: 2,
            explanation: "Correct Answer: C. Late dumping syndrome is due to rapid glucose absorption causing hypoglycemia.",
            details: "A. Incorrect: Surgery is reserved for complications.<br>B. Incorrect: Eradication therapy is for H. pylori-positive cases.<br>C. Correct: Hypoglycemia from rapid glucose spike.<br>D. Incorrect: Biopsy is not mandatory for duodenal ulcer."
          },
          {
            text: "A 30-year-old female presents with a 2-day history of constant pain over the right upper quadrant (RUQ) associated with vomiting. She is febrile with a positive Murphy's sign. Diagnosis?",
            choices: [
              "A. Cholangitis",
              "B. Pancreatitis",
              "C. Empyema of the gallbladder",
              "D. Acute cholecystitis"
            ],
            correct: 3,
            explanation: "Correct Answer: D. Acute cholecystitis presents with RUQ pain, fever, vomiting, and positive Murphy’s sign.",
            details: "A. Incorrect: Cholangitis includes jaundice and chills.<br>B. Incorrect: Pancreatitis causes epigastric pain.<br>C. Incorrect: Empyema is a complication, less likely.<br>D. Correct: Classic presentation."
          },
          {
            text: "A 60-year-old male presents with a history of episodic abdominal pain, jaundice, and fever with chills. Diagnosis is:",
            choices: [
              "A. Cholangitis",
              "B. Pancreatitis",
              "C. Empyema of the gallbladder",
              "D. Acute cholecystitis"
            ],
            correct: 0,
            explanation: "Correct Answer: A. Cholangitis presents with Charcot’s triad: pain, jaundice, and fever with chills.",
            details: "A. Correct: Matches Charcot’s triad.<br>B. Incorrect: No jaundice typically.<br>C. Incorrect: No jaundice or chills.<br>D. Incorrect: Lacks jaundice."
          },
          {
            text: "A 40-year-old man underwent laparoscopic cholecystectomy 2 years earlier. He remains asymptomatic until 1 week before admission, when he complains of RUQ pain and jaundice. He develops fever. What is the next best step?",
            choices: [
              "A. Should be discharged home under observation",
              "B. Should be observed in the hospital",
              "C. ERCP with sphincterotomy and stone removal",
              "D. Percutaneous transhepatic cholangiography"
            ],
            correct: 2,
            explanation: "Correct Answer: C. ERCP with sphincterotomy removes CBD stones causing cholangitis.",
            details: "A. Incorrect: Risks worsening infection.<br>B. Incorrect: Active intervention needed.<br>C. Correct: Addresses stone obstruction.<br>D. Incorrect: Secondary option."
          },
          {
            text: "The rule of 2 as applicable to Meckel's diverticulum is all EXCEPT:",
            choices: [
              "A. 2 inches long.",
              "B. Present in 2% of cases.",
              "C. 2 feet from ileocaecal valve.",
              "D. Contains only 2 coats of intestinal wall."
            ],
            correct: 3,
            explanation: "Correct Answer: D. Meckel’s diverticulum has all intestinal wall layers, not just two coats.",
            details: "A. Incorrect: True, ~2 inches.<br>B. Incorrect: True, ~2% prevalence.<br>C. Incorrect: True, ~2 feet from valve.<br>D. Correct: False, has all layers."
          },
          {
            text: "A 60-year-old woman with hepatitis C, presents acutely with her first decompensation of chronic liver disease. An abdominal ultrasound confirms portal hypertension, multiple hepatic lesions and Child-Pugh C. What is the best management?",
            choices: [
              "A. Palliation - best supportive care",
              "B. External beam radiation",
              "C. Wedge resection/segmentectomy",
              "D. Radiofrequency ablation"
            ],
            correct: 0,
            explanation: "Correct Answer: A. Child-Pugh C and multiple HCC foci indicate palliation due to poor liver function.",
            details: "A. Correct: Poor prognosis, supportive care.<br>B. Incorrect: Limited efficacy.<br>C. Incorrect: Surgery contraindicated.<br>D. Incorrect: Not feasible with Child-Pugh C."
          },
          {
            text: "Which of the following ligaments is connected to the liver and keeps it in its place?",
            choices: [
              "A. Gastrohepatic omentum",
              "B. Lienorenal ligament",
              "C. Falciform ligament",
              "D. Gastrophrenic ligament"
            ],
            correct: 2,
            explanation: "Correct Answer: C. The falciform ligament anchors the liver to the anterior abdominal wall.",
            details: "A. Incorrect: Connects stomach to liver.<br>B. Incorrect: Spleen-related.<br>C. Correct: Stabilizes liver.<br>D. Incorrect: Stomach-related."
          },
          {
            text: "Which of the following statements most accurately describes the current therapy for pyogenic hepatic abscess?",
            choices: [
              "A. Antibiotics alone are adequate for the treatment of most cases.",
              "B. All patients require open surgical drainage for optimal management.",
              "C. Optimal treatment involves treatment of not only the abscess but the underlying source as well.",
              "D. Percutaneous drainage is more successful for multiple lesions than for solitary ones."
            ],
            correct: 2,
            explanation: "Correct Answer: C. Treating the abscess and underlying source (e.g., biliary obstruction) is optimal.",
            details: "A. Incorrect: Small abscesses only.<br>B. Incorrect: Percutaneous preferred.<br>C. Correct: Comprehensive approach.<br>D. Incorrect: Solitary lesions easier."
          },
          {
            text: "The most frequent complication of Meckel’s diverticulum is:",
            choices: [
              "A. Diverticulitis",
              "B. Bleeding",
              "C. Intussusception",
              "D. Intestinal obstruction"
            ],
            correct: 3,
            explanation: "Correct Answer: D. Intestinal obstruction is the most frequent complication.",
            details: "A. Incorrect: Less common.<br>B. Incorrect: Most frequent manifestation.<br>C. Incorrect: Less common.<br>D. Correct: Most frequent complication."
          }
        ]
      };

      // Initialize quiz content
      document.title = quizConfig.title;
      document.getElementById("quizHeader").innerText = quizConfig.title;
      document.getElementById("lessonText").innerText = `Lesson: ${quizConfig.lesson}`;

      let currentQuestionIndex = 0;
      let score = 0;

      function decodeHtml(html) {
        const txt = document.createElement("textarea");
        txt.innerHTML = html;
        return txt.value;
      }

      function startQuiz() {
        document.getElementById("startScreen").style.display = "none";
        document.getElementById("questionBox").style.display = "block";
        showQuestion();
        renderQuestionNav();
      }

      function showQuestion() {
        try {
          const q = quizConfig.questions[currentQuestionIndex];
          if (!q || !q.choices || typeof q.correct !== 'number') {
            console.error('Invalid question structure:', q);
            return;
          }
          document.getElementById("questionText").innerHTML = `Question ${currentQuestionIndex + 1}: ${decodeHtml(q.text)}`;
          const optionsBox = document.getElementById("optionsBox");
          optionsBox.innerHTML = "";
          q.choices.forEach((choice, idx) => {
            const btn = document.createElement("button");
            btn.innerText = decodeHtml(choice);
            btn.disabled = false;
            btn.onclick = () => {
              checkAnswer(idx, btn);
            };
            optionsBox.appendChild(btn);
          });
          document.getElementById("answerBox").style.display = "none";
          document.getElementById("detailsBtn").style.display = "none";
          document.getElementById("detailsBox").style.display = "none";
          document.getElementById("nextBtn").style.display = "none";
        } catch (error) {
          console.error("Error in showQuestion:", error);
        }
      }

      function checkAnswer(selectedIndex, btn) {
        try {
          const q = quizConfig.questions[currentQuestionIndex];
          const answerBox = document.getElementById("answerBox");
          const detailsBtn = document.getElementById("detailsBtn");
          const nextBtn = document.getElementById("nextBtn");

          const optionButtons = document.getElementById("optionsBox").getElementsByTagName("button");
          for (let i = 0; i < optionButtons.length; i++) {
            optionButtons[i].disabled = true;
            optionButtons[i].style.opacity = 0.7;
            if (i === q.correct) {
              optionButtons[i].style.backgroundColor = "#28a745";
            } else if (i === selectedIndex && i !== q.correct) {
              optionButtons[i].style.backgroundColor = "#dc3545";
            }
          }

          if (selectedIndex === q.correct) {
            answerBox.innerHTML = "<p style='color:green; font-weight:bold;'>Correct!</p>" + decodeHtml(q.explanation);
            score++;
          } else {
            answerBox.innerHTML = "<p style='color:red; font-weight:bold;'>Incorrect.</p>" + decodeHtml(q.explanation);
          }
          answerBox.style.display = "block";
          detailsBtn.style.display = "inline-block";
          nextBtn.style.display = "inline-block";
          updateQuestionNav();
        } catch (error) {
          console.error("Error in checkAnswer:", error);
        }
      }

      function showDetails() {
        try {
          const detailsBox = document.getElementById("detailsBox");
          const q = quizConfig.questions[currentQuestionIndex];
          detailsBox.innerHTML = decodeHtml(q.details.replace(/\n/g, "<br>"));
          detailsBox.style.display = "block";
        } catch (error) {
          console.error("Error in showDetails:", error);
        }
      }

      function nextQuestion() {
        currentQuestionIndex++;
        if (currentQuestionIndex < quizConfig.questions.length) {
          showQuestion();
          updateQuestionNav();
        } else {
          document.getElementById("questionBox").style.display = "none";
          document.getElementById("startScreen").style.display = "block";
          document.getElementById("quizHeader").innerText = `Quiz Completed!`;
          document.getElementById("lessonText").innerText = `You scored ${score} out of ${quizConfig.questions.length}.`;
          document.getElementById("startScreen").innerHTML += `<button class="start-btn" onclick="restartQuiz()">Restart Quiz</button>`;
        }
      }

      function goToQuestion(index) {
        if (index >= 0 && index < quizConfig.questions.length) {
          currentQuestionIndex = index;
          showQuestion();
          updateQuestionNav();
        }
      }

      function renderQuestionNav() {
        try {
          const navBox = document.getElementById("questionNav");
          navBox.innerHTML = "";
          quizConfig.questions.forEach((_, index) => {
            const btn = document.createElement("button");
            btn.innerText = `${index + 1}`;
            btn.onclick = () => goToQuestion(index);
            navBox.appendChild(btn);
          });
          updateQuestionNav();
        } catch (error) {
          console.error("Error in renderQuestionNav:", error);
        }
      }

      function updateQuestionNav() {
        try {
          const navButtons = document.getElementById("questionNav").getElementsByTagName("button");
          for (let i = 0; i < navButtons.length; i++) {
            navButtons[i].disabled = (i === currentQuestionIndex);
            navButtons[i].style.opacity = (i === currentQuestionIndex) ? 0.6 : 1;
          }
        } catch (error) {
          console.error("Error in updateQuestionNav:", error);
        }
      }

      function restartQuiz() {
        try {
          currentQuestionIndex = 0;
          score = 0;
          document.getElementById("startScreen").style.display = "block";
          document.getElementById("quizHeader").innerText = quizConfig.title;
          document.getElementById("lessonText").innerText = `Lesson: ${quizConfig.lesson}`;
          document.getElementById("startScreen").innerHTML = `
            <h1 id="quizHeader">${quizConfig.title}</h1>
            <p id="lessonText">Lesson: ${quizConfig.lesson}</p>
            <button class="start-btn" onclick="startQuiz()">Start Quiz</button>
          `;
          startQuiz();
        } catch (error) {
          console.error("Error in restartQuiz:", error);
        }
      }
    </script>
  </body>
</html>
